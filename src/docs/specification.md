1. ユーザープロファイリングフェーズ

目的:
学習者の背景・目的・レベル・学習スタイルなどを詳細に把握し、パーソナライズされたコンテンツ生成の基盤とする。

収集項目例:
	•	自由入力:
	•	学習目的（例：「TOEICスコア向上」、「Python習得」など）
	•	過去の学習経験・現在の理解度
	•	不安や苦手分野
	•	選択式／プルダウン:
	•	目標期間（例：「1か月以内」「半年～1年」）
	•	1日の学習時間（例：「30分未満」「1時間程度」「2時間以上」）
	•	学習スタイル（例：「テキスト中心」「動画・図解重視」「実践・演習中心」）
	•	自己評価レベル（例：「初心者」「中級」「上級」）

出力形式:
収集結果は辞書形式またはテンプレート変数にまとめ、以降のAIプロンプト内で動的に参照する。

⸻

2. コンテンツ生成フェーズ

A. カリキュラム概要・教材生成

目的:
全体の学習フロー（KPIツリー、マインドマップ、ロードマップ）と各モジュール（導入、理論、実例、インタラクティブ＝例題・復習）の概要を視覚的に提示する。

生成手順:
	1.	プロンプト作成:
ユーザープロファイリング情報を埋め込んだプロンプトを用意し、以下のようなデータ構造を生成するよう指示
	•	カリキュラムタイトル／学習テーマ
	•	全体の完了予想時間
	•	各モジュール（例：基礎概念、応用など）のセクション
	•	導入: 学習の目的、概要説明
	•	理論: 基本知識・概念の解説
	•	実例: 具体例、ケーススタディ
	•	インタラクティブ: AIチャットへ誘導する「例題・クイズ」の案内
	2.	出力フォーマット:
JSON形式（または独自タグ付きMarkdown）で、各UIコンポーネントに対応するデータ構造として出力
例:
{
  "title": "〇〇学習カリキュラム",
  "estimatedTime": "全体でX時間",
  "modules": [
    {
      "moduleTitle": "モジュール1：基礎概念",
      "sections": [
        {"sectionType": "introduction", "content": "導入テキスト..."},
        {"sectionType": "theory", "content": "基本理論の説明..."},
        {"sectionType": "example", "content": "具体的な実例..."},
        {"sectionType": "interactive", "content": "AIチャットでの例題・復習への誘導文..."}
      ]
    }
    // その他のモジュール
  ]
}


	3.	静的教材部分:
基本知識や理論、実例は固定コンテンツとして生成。必要に応じ、TTS（音声再生）機能を連携して提供。

B. AIチャット（対話型インタラクション）生成

目的:
例題、クイズ、復習、フィードバックなどのインタラクティブな対話セッションを生成し、ユーザーとの動的なやり取りを実現する。

生成手順:
	1.	プロンプト作成:
ユーザープロファイリングとカリキュラム情報を元に、対話シナリオを生成するプロンプトを作成
	•	対話の流れ：質問→ユーザー回答→フィードバック、追加の質問、分岐シナリオなど
	•	出力は構造化データ（JSON形式やブロック形式）で、質問文、選択肢、解説テキストなどを含む
	2.	連携:
カリキュラムの「インタラクティブ」セクションから、ユーザーが容易にチャットセッションへ移行できるようUI側と連動

⸻

3. UI構造へのマッピングとシステム連携

A. 教材ページUI

主なコンポーネント:
	•	ヘッダー:
カリキュラムタイトル、進捗バー、全体概要
	•	サイドバー／ナビゲーション:
KPIツリー、マインドマップ、モジュール一覧
	•	メインコンテンツ:
各セクション（導入、理論、実例）の表示
	•	生成されたJSON／Markdownをパースして、対応するUIコンポーネント（テキストブロック、図表、コードブロックなど）に自動マッピング
	•	TTS連携:
テキスト読み上げ機能のための再生ボタンを設置

B. AIチャットUI

主なコンポーネント:
	•	チャット画面:
会話履歴エリア、ユーザー入力欄、送信ボタン、クイックリプライ（選択肢）機能
	•	連携:
カリキュラムの「インタラクティブ」セクションからシームレスにチャット画面へ遷移
	•	データ管理:
チャットの会話履歴は構造化データとして保持し、ユーザーの学習進捗に連動してパーソナライズに利用

C. データフローと連携プロセス
	1.	ユーザープロファイリング:
ユーザー入力を収集し、辞書形式にまとめる
	2.	プロンプト生成:
	•	カリキュラム・教材生成用プロンプト：プロファイリング情報とUI構造に合わせたテンプレートに沿って生成
	•	AIチャット生成用プロンプト：対話シナリオや例題・クイズ生成のためのプロンプト
	3.	AI出力のパース:
フロントエンドで、AIから返されたJSONまたはタグ付きMarkdownをパースし、各UIコンポーネントに自動的にマッピング
	•	ポストプロセスとして、形式が崩れている場合は正規表現や例外処理で整形
	4.	フィードバックループ:
ユーザーの学習進捗、チャット対話履歴、フィードバックを蓄積し、定期的にカリキュラムや対話内容の再生成・調整に活用

⸻

4. まとめ
	•	統合されたシステム:
ユーザープロファイリング情報を元に、静的な教材コンテンツ（導入、理論、実例）と動的な対話セッション（例題、クイズ、復習）をそれぞれAIに生成させ、UIに合わせた構造化データとして出力。
	•	自動マッピング:
事前に定義されたJSONスキーマまたは独自タグ付きMarkdownを利用することで、手作業による整形を極力排除し、UIコンポーネント（教材ページ、チャット画面）にシームレスに反映。
	•	パーソナライズと継続学習:
ユーザープロファイリングにより各学習者に最適化されたコンテンツを提供し、インタラクティブなAIチャットでの対話により、学習の定着・復習を促進する設計とする。


1. 教材ページのUI構成・ページ構成案

A. ページ全体のレイアウト
	•	ヘッダーエリア
	•	ロゴ／ブランド名: サイトやサービスのアイデンティティを表示
	•	ユーザー情報: プロフィールや進捗バー、通知アイコンなど
	•	ナビゲーション: カリキュラム概要、各モジュールへのリンク、チャットセッションへのアクセスボタン
	•	サイドバー／サブナビ
	•	KPIツリー／マインドマップ: 全体の学習ロードマップをビジュアルに表示
	•	モジュール一覧: 各モジュール（例：導入、理論、実例、インタラクティブ）のリスト表示
	•	進捗インジケーター: 各モジュールの達成状況をアイコンやバーで視覚的に表現
	•	メインコンテンツエリア
	•	教材セクション:
	•	各モジュールはタブまたはカード形式で表示
	•	「導入」「理論」「実例」「補足資料（図表、コードサンプル、動画、TTS再生機能など）」をセクション毎に配置
	•	ページ下部には、関連リソースや参考資料のリンク
	•	インタラクティブエリア:
	•	「練習問題／例題」への誘導文とボタン配置（例：『AIチャットで例題に挑戦』）
	•	ボタン押下で、右側または別モーダルでAIチャットウィンドウが展開
	•	フッター
	•	利用規約、プライバシーポリシー、サポートへのリンク、SNS連携など

B. ユーザーの操作フロー
	1.	初回表示:
	•	ユーザーが教材ページに入ると、ヘッダーに全体のカリキュラム概要、サイドバーにKPIツリーやモジュール一覧が表示され、全体像が把握できる状態に。
	2.	各モジュール選択:
	•	サイドバーまたはメインエリアで、学習したいモジュール（例：理論、実例）を選択し、詳細内容が展開される。
	3.	静的教材の閲覧:
	•	選択したモジュール内の「導入」「理論」「実例」セクションを順次読み進める。
	4.	インタラクティブセクションへの移行:
	•	ページ下部または専用ボタンにより、「AIチャットで例題に挑戦」などのアクションが提示され、ユーザーが対話型セッションに移行できる。
	5.	学習進捗の確認:
	•	進捗バーやチェックリストにより、学習の達成状況が常にフィードバックされる。

⸻

2. AIチャットの動作・挙動のシステム案

A. チャット開始タイミングとトリガー
	•	自動誘導:
	•	ユーザーが静的教材の「インタラクティブ」セクションに到達したタイミングで、ポップアップやスライドインの形式で「例題に挑戦しますか？」と自動誘導。
	•	手動トリガー:
	•	ユーザーが任意で「AIチャットで例題を解く」ボタンを押すことで、チャットセッションが開始。
	•	タイミングの柔軟性:
	•	前回のチャットセッションの結果や進捗に応じ、定期的に「復習」や「新しい例題」を提示するリマインダーを自動送信。

B. 例題提示のタイミングとシナリオ
	•	学習セクションの終了後:
	•	「理論」セクションの最後に、理解度を確認するための例題やクイズを自動で生成し、チャットで出題。
	•	モジュール間の区切り:
	•	モジュール終了時に、全体の振り返りとして、重要ポイントの確認や応用例の例題を提示。
	•	ユーザーの回答に応じたフォローアップ質問や、補足説明をリアルタイムで展開。
	•	定期的な復習タイミング:
	•	過去の学習履歴に基づき、時間が経過した段階で「前回の復習」として、再度例題を出題する仕組み。

C. チャットセッションの対話フロー
	1.	イントロダクション:
	•	「本モジュールの理解度をチェックするため、簡単な例題をいくつか出します。準備はよろしいですか？」という確認メッセージ。
	2.	例題出題:
	•	シンプルな問題から開始し、ユーザーの回答を待つ
	•	選択式や自由記述の両方の形式を混在させ、インタラクティブな対話を実現
	3.	フィードバック提供:
	•	ユーザーの回答に対し、「正解です」「もう少し詳しく説明します」など、即時のフィードバックを返す
	•	必要に応じて、詳細な解説や追加のヒントを提供する分岐シナリオを実施
	4.	応用例・追加例題:
	•	初問の結果に応じ、難易度を調整しながら次の例題を出題
	•	ユーザーが回答に自信が持てない場合、ヒント機能や解答例の提示オプションを提供
	5.	セッション終了と振り返り:
	•	セッションの最後に、全体のフィードバックと、学習内容の要点まとめを提示
	•	「もう一度復習しますか？」「次のモジュールに進む準備ができましたか？」など、次のアクションへの誘導

D. システム連携とパーソナライズ
	•	リアルタイムデータ連携:
	•	ユーザーの過去の回答履歴や進捗データを元に、AIチャットが動的に問題の難易度や内容を調整する仕組みを実装
	•	フィードバックループ:
	•	チャットセッションのログはデータベースに蓄積し、定期的な再評価やカリキュラムの微調整に活用
	•	UIとのシームレスな遷移:
	•	静的教材ページからチャットへの遷移が途切れず、ユーザーが迷わず次のステップに進めるUIフローを実装

⸻

まとめ
	•	教材ページ:
	•	ヘッダー、サイドバー、メインコンテンツ、フッターの各コンポーネントで、全体の学習ロードマップとモジュール毎の詳細内容を視覚的に提供
	•	インタラクティブセクションへの明確な誘導ボタンとTTS連携で、多角的な学習体験を実現
	•	AIチャット:
	•	ユーザーが静的教材の理解を深めた後、自然なタイミングで例題やクイズを提示する自動対話セッションを実装
	•	例題の出題、即時フィードバック、応用例の提示、定期的な復習といった動的な対話フローを設計し、ユーザーの学習意欲を維持